import swaggerJsdoc from 'swagger-jsdoc';

const options = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'API Carbotrack',
      version: '1.0.0',
      description: 'API pour la gestion des r√©clamations Carbotrack',
      contact: {
        name: 'Support API',
        email: 'mahdibeyy@gmail.com',
      },
    },
    servers: [{ url: 'http://localhost:3000/api', description: 'Serveur local' }],
    components: {
      securitySchemes: {
        cookieAuth: {
          type: 'apiKey',
          in: 'cookie',
          name: 'jwt',
          description: 'Authentification via cookie HTTP-only',
        },
      },
      schemas: {
        User: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 14 },
            username: { type: 'string', example: 'Ahmed Zamma' },
            email: { type: 'string', example: 'mahdibeyy@gmail.com' },
            numero_telephone: { type: 'string', example: '56327237' },
            role: {
              type: 'string',
              enum: ['gerant', 'cogerant', 'client', 'caissier', 'pompiste'],
              example: 'gerant',
            },
            status: {
              type: 'string',
              enum: ['active', 'inactive'],
              example: 'active',
            },
            photo: {
              type: 'string',
              example: '/images/nbg.png',
              nullable: true,
            },
          },
        },
        LoginInput: {
          type: 'object',
          required: ['email', 'password'],
          properties: {
            email: {
              type: 'string',
              example: 'mahdibeyy@gmail.com',
            },
            password: {
              type: 'string',
              example: 'motdepasse123',
            },
          },
        },
        RegisterInput: {
          type: 'object',
          required: ['email', 'password', 'username', 'numero_telephone'],
          properties: {
            email: {
              type: 'string',
              example: 'nouveau@example.com',
            },
            password: {
              type: 'string',
              example: 'Motdepasse123!',
            },
            username: {
              type: 'string',
              example: 'Nouveau Utilisateur',
            },
            numero_telephone: {
              type: 'string',
              example: '98765432',
            },
            role: {
              type: 'string',
              enum: ['gerant', 'cogerant', 'client', 'caissier', 'pompiste'],
              example: 'client',
            },
          },
        },
        PasswordResetInput: {
          type: 'object',
          required: ['email'],
          properties: {
            email: {
              type: 'string',
              example: 'mahdibeyy@gmail.com',
            },
          },
        },
        NewPasswordInput: {
          type: 'object',
          required: ['token', 'newPassword'],
          properties: {
            token: {
              type: 'string',
              example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',
            },
            newPassword: {
              type: 'string',
              example: 'NouveauMotdepasse123!',
            },
          },
        },
        Pompe: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 34 },
            numero_pompe: { type: 'string', example: 'P020' },
            type_pompe: {
              type: 'string',
              enum: ['gasoil', 'multi-produits', 'sans plomb'],
              example: 'gasoil',
            },
            statut: {
              type: 'string',
              enum: ['active', 'reserve', 'maintenance', 'hors_service'],
              example: 'reserve',
            },
            created_at: {
              type: 'string',
              format: 'date-time',
              example: '2025-04-21T19:28:39Z',
            },
          },
        },
        PompeInput: {
          type: 'object',
          required: ['numero_pompe', 'type_pompe'],
          properties: {
            numero_pompe: {
              type: 'string',
              pattern: '^P[0-9]{3}$',
              example: 'P020',
              description: 'Doit commencer par P suivi de 3 chiffres',
            },
            type_pompe: {
              type: 'string',
              enum: ['gasoil', 'multi-produits', 'sans plomb'],
              example: 'gasoil',
            },
            statut: {
              type: 'string',
              enum: ['active', 'reserve', 'maintenance', 'hors_service'],
              example: 'reserve',
              default: 'reserve',
            },
          },
        },
        PompeUpdate: {
          type: 'object',
          properties: {
            numero_pompe: {
              type: 'string',
              pattern: '^P[0-9]{3}$',
              example: 'P020',
              description: 'Doit commencer par P suivi de 3 chiffres',
            },
            type_pompe: {
              type: 'string',
              enum: ['gasoil', 'multi-produits', 'sans plomb'],
              example: 'gasoil',
            },
            statut: {
              type: 'string',
              enum: ['active', 'reserve', 'maintenance', 'hors_service'],
              example: 'active',
            },
          },
        },
        PompeFilters: {
          type: 'object',
          properties: {
            type_pompe: {
              type: 'string',
              enum: ['gasoil', 'multi-produits', 'sans plomb'],
              example: 'gasoil',
              nullable: true,
            },
            statut: {
              type: 'string',
              enum: ['active', 'reserve', 'maintenance', 'hors_service'],
              example: 'active',
              nullable: true,
            },
            date_debut: {
              type: 'string',
              format: 'date',
              example: '2025-04-01',
              nullable: true,
            },
            date_fin: {
              type: 'string',
              format: 'date',
              example: '2025-04-30',
              nullable: true,
            },
          },
        },
        Pistolet: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 4 },
            pompe_id: { type: 'integer', example: 34 },
            numero_pistolet: { type: 'string', example: 'PIII1' },
            statut: {
              type: 'string',
              enum: ['disponible', 'indisponible', 'maintenance'],
              example: 'disponible',
            },
            created_at: {
              type: 'string',
              format: 'date-time',
              example: '2025-04-21T20:28:39Z',
            },
            updated_at: {
              type: 'string',
              format: 'date-time',
              example: '2025-05-08T20:37:27Z',
            },
            nom_produit: { type: 'string', example: 'SP95' },
            prix_unitaire: { type: 'number', format: 'float', example: 2.5 },
            unite_mesure: { type: 'string', example: 'Litre', nullable: true },
            date_dernier_index: {
              type: 'string',
              format: 'date',
              example: '2025-05-08',
              nullable: true,
            },
            dernier_index: {
              type: 'number',
              format: 'float',
              example: 400.0,
              nullable: true,
            },
          },
        },
        PistoletInput: {
          type: 'object',
          required: ['pompe_id', 'numero_pistolet', 'nom_produit', 'prix_unitaire'],
          properties: {
            pompe_id: { type: 'integer', example: 34 },
            numero_pistolet: { type: 'string', example: 'PIII1' },
            nom_produit: { type: 'string', example: 'SP95' },
            prix_unitaire: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 2.5,
            },
            unite_mesure: {
              type: 'string',
              example: 'Litre',
              nullable: true,
            },
            statut: {
              type: 'string',
              enum: ['disponible', 'indisponible', 'maintenance'],
              example: 'disponible',
              default: 'disponible',
            },
          },
        },
        PistoletUpdate: {
          type: 'object',
          properties: {
            numero_pistolet: { type: 'string', example: 'PIII1' },
            nom_produit: { type: 'string', example: 'SP95' },
            prix_unitaire: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 2.5,
            },
            unite_mesure: { type: 'string', example: 'Litre' },
            date_dernier_index: {
              type: 'string',
              format: 'date',
              example: '2025-05-08',
            },
            dernier_index: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 400.0,
            },
          },
        },
        StatutUpdate: {
          type: 'object',
          required: ['statut'],
          properties: {
            statut: {
              type: 'string',
              enum: ['disponible', 'indisponible', 'maintenance'],
              example: 'maintenance',
            },
          },
        },

        Affectation: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 4074 },
            pompiste_id: { type: 'integer', example: 20 },
            poste_id: { type: 'integer', example: 3 },
            pompe_id: { type: 'integer', example: 35 },
            date: { type: 'string', format: 'date', example: '2025-05-01' },
          },
        },
        AffectationInput: {
          type: 'object',
          required: ['pompiste_id', 'poste_id', 'pompe_id', 'date'],
          properties: {
            pompiste_id: { type: 'integer', example: 20 },
            poste_id: { type: 'integer', example: 3 },
            pompe_id: { type: 'integer', example: 35 },
            date: { type: 'string', format: 'date', example: '2025-05-01' },
          },
        },
        AffectationUpdate: {
          type: 'object',
          properties: {
            pompiste_id: { type: 'integer', example: 20 },
            poste_id: { type: 'integer', example: 3 },
            pompe_id: { type: 'integer', example: 35 },
          },
        },
        MonthYearInput: {
          type: 'object',
          required: ['mois', 'annee'],
          properties: {
            mois: { type: 'integer', minimum: 1, maximum: 12, example: 5 },
            annee: { type: 'integer', example: 2025 },
          },
        },
        ReleveInput: {
          type: 'object',
          required: ['pistolet_id', 'index_fermeture'],
          properties: {
            pistolet_id: { type: 'integer', example: 4 },
            index_fermeture: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 200.0,
            },
            commentaire: {
              type: 'string',
              example: 'Relev√© automatique syst√®me',
              nullable: true,
            },
          },
        },
        ReleveManuelInput: {
          type: 'object',
          required: ['pistolet_id', 'index_ouverture', 'index_fermeture'],
          properties: {
            pistolet_id: { type: 'integer', example: 4 },
            index_ouverture: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 0.0,
            },
            index_fermeture: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 200.0,
            },
            date_heure_saisie: {
              type: 'string',
              format: 'date-time',
              example: '2025-05-15T08:00:00Z',
              nullable: true,
            },
            commentaire: {
              type: 'string',
              example: 'Correction index oubli√©',
              nullable: true,
            },
          },
        },
        RapportJournalier: {
          type: 'object',
          properties: {
            date: {
              type: 'string',
              format: 'date',
              example: '2025-05-15',
            },
            total_ventes: {
              type: 'number',
              format: 'float',
              example: 1250.5,
            },
            details_pistolets: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  pistolet_id: { type: 'integer', example: 4 },
                  numero_pistolet: { type: 'string', example: 'PIII1' },
                  volume: { type: 'number', format: 'float', example: 200.0 },
                  montant: { type: 'number', format: 'float', example: 500.0 },
                },
              },
            },
          },
        },
        RapportManuelInput: {
          type: 'object',
          required: ['date', 'pistolet_id', 'volume', 'montant'],
          properties: {
            date: {
              type: 'string',
              format: 'date',
              example: '2025-05-15',
            },
            pistolet_id: { type: 'integer', example: 4 },
            volume: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 150.0,
            },
            montant: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 375.0,
            },
            commentaire: {
              type: 'string',
              example: 'Vente exceptionnelle',
              nullable: true,
            },
          },
        },
        RevenuJournalier: {
          type: 'object',
          properties: {
            date: {
              type: 'string',
              format: 'date',
              example: '2025-05-15',
            },
            total: {
              type: 'number',
              format: 'float',
              example: 3250.75,
            },
            nombre_transactions: { type: 'integer', example: 42 },
          },
        },

        Credit: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 2 },
            id_utilisateur: { type: 'integer', example: 13 },
            type_credit: {
              type: 'string',
              enum: ['organisationnelle', 'individuelle'],
              example: 'organisationnelle',
            },
            solde_credit: { type: 'number', format: 'float', example: 500.0 },
            date_debut: { type: 'string', format: 'date', example: '2025-04-10' },
            duree_credit: { type: 'integer', example: 30 },
            credit_utilise: {
              type: 'number',
              format: 'float',
              example: 500.0,
              nullable: true,
            },
            etat: {
              type: 'string',
              enum: ['actif', 'expir√©', 'rembours√©', 'suspendu'],
              example: 'rembours√©',
            },
            montant_restant: {
              type: 'number',
              format: 'float',
              example: 0.0,
              nullable: true,
            },
            date_dernier_paiement: {
              type: 'string',
              format: 'date-time',
              example: '2025-04-16T19:06:03Z',
              nullable: true,
            },
          },
        },
        CreditInput: {
          type: 'object',
          required: ['id_utilisateur', 'type_credit', 'solde_credit', 'duree_credit'],
          properties: {
            id_utilisateur: { type: 'integer', example: 13 },
            type_credit: {
              type: 'string',
              enum: ['organisationnelle', 'individuelle'],
              example: 'organisationnelle',
            },
            solde_credit: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 500.0,
            },
            duree_credit: {
              type: 'integer',
              minimum: 1,
              example: 30,
            },
          },
        },
        CreditRenouvellement: {
          type: 'object',
          required: ['id_credit', 'montant_ajout'],
          properties: {
            id_credit: { type: 'integer', example: 2 },
            montant_ajout: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 200.0,
            },
            prolongation_jours: {
              type: 'integer',
              minimum: 0,
              example: 30,
              nullable: true,
            },
          },
        },

        // ==================== SCH√âMAS V√âHICULES ====================
        Vehicule: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 8 },
            immatriculation: { type: 'string', example: '22TU2002' },
            marque: { type: 'string', example: 'Mercedes' },
            type_vehicule: {
              type: 'string',
              enum: ['voiture', 'camion', 'moto', 'bus'],
              example: 'camion',
            },
            qr_code: {
              type: 'string',
              example: 'http://localhost:3000/qrcodes/22TU2002.png',
              nullable: true,
            },
            id_credit: {
              type: 'integer',
              example: 2,
              nullable: true,
            },
          },
        },
        VehiculeInput: {
          type: 'object',
          required: ['immatriculation', 'marque', 'type_vehicule'],
          properties: {
            immatriculation: { type: 'string', example: '22TU2002' },
            marque: { type: 'string', example: 'Mercedes' },
            type_vehicule: {
              type: 'string',
              enum: ['voiture', 'camion', 'moto', 'bus'],
              example: 'camion',
            },
            id_credit: {
              type: 'integer',
              example: 2,
              nullable: true,
            },
          },
        },

        // ==================== SCH√âMAS TRANSACTIONS ====================
        Transaction: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 75 },
            id_vehicule: { type: 'integer', example: 28 },
            quantite: { type: 'number', format: 'float', example: 0.1 },
            montant: { type: 'number', format: 'float', example: 1.0 },
            date_transaction: {
              type: 'string',
              format: 'date-time',
              example: '2025-05-13T19:36:22Z',
            },
            id_credit: {
              type: 'integer',
              example: 17,
              nullable: true,
            },
            preuve: {
              type: 'string',
              example: 'http://localhost:3000/transactions/transaction_174...',
              nullable: true,
            },
            id_pompiste: {
              type: 'integer',
              example: 25,
              nullable: true,
            },
          },
        },
        TransactionInput: {
          type: 'object',
          required: ['id_vehicule', 'quantite', 'montant'],
          properties: {
            id_vehicule: { type: 'integer', example: 28 },
            quantite: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 0.1,
            },
            montant: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 1.0,
            },
            id_credit: {
              type: 'integer',
              example: 17,
              nullable: true,
            },
            preuve: {
              type: 'string',
              format: 'binary',
              description: 'Image de preuve (JPG/PNG)',
              nullable: true,
            },
          },
        },

        // ==================== SCH√âMAS PAIEMENTS ====================
        Paiement: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 20 },
            reference_paiement: { type: 'string', example: 'PAY-888513-183' },
            id_credit: { type: 'integer', example: 18 },
            montant_paye: { type: 'number', format: 'float', example: 100.0 },
            montant_restant: { type: 'number', format: 'float', example: 100.0 },
            date_paiement: {
              type: 'string',
              format: 'date-time',
              example: '2025-05-16T02:28:08Z',
            },
            mode_paiement: {
              type: 'string',
              enum: ['especes', 'carte', 'virement', 'mobile'],
              example: 'especes',
            },
            description: {
              type: 'string',
              example: 'Paiement partiel',
              nullable: true,
            },
            id_caissier: {
              type: 'integer',
              example: 27,
              nullable: true,
            },
          },
        },
        PaiementInput: {
          type: 'object',
          required: ['id_credit', 'montant_paye', 'mode_paiement'],
          properties: {
            id_credit: { type: 'integer', example: 18 },
            montant_paye: {
              type: 'number',
              format: 'float',
              minimum: 0,
              example: 100.0,
            },
            mode_paiement: {
              type: 'string',
              enum: ['especes', 'carte', 'virement', 'mobile'],
              example: 'especes',
            },
            description: {
              type: 'string',
              example: 'Paiement partiel',
              nullable: true,
            },
          },
        },
        Reclamation: {
          type: 'object',
          properties: {
            id: { type: 'integer', example: 1 },
            id_client: { type: 'integer', example: 5 },
            objet: { type: 'string', example: 'Probl√®me de livraison' },
            raison: {
              type: 'string',
              enum: ['produit', 'service', 'livraison', 'facturation', 'autre'],
              example: 'livraison',
            },
            description: {
              type: 'string',
              example: "La livraison n'est pas arriv√©e √† la date promise",
            },
            statut: {
              type: 'string',
              enum: ['nouveau', 'en_cours', 'resolu', 'fermer'],
              example: 'nouveau',
            },
            date_creation: { type: 'string', format: 'date-time' },
          },
        },
        ReclamationInput: {
          type: 'object',
          required: ['id_client', 'objet', 'raison', 'description'],
          properties: {
            id_client: { type: 'integer', example: 5 },
            objet: {
              type: 'string',
              minLength: 1,
              maxLength: 100,
              example: 'Probl√®me de livraison',
            },
            raison: {
              type: 'string',
              enum: ['produit', 'service', 'livraison', 'facturation', 'autre'],
              example: 'livraison',
            },
            description: {
              type: 'string',
              minLength: 1,
              maxLength: 1000,
              example: "La livraison n'est pas arriv√©e √† la date promise",
            },
          },
        },
        StatutUpdate: {
          type: 'object',
          required: ['statut'],
          properties: {
            statut: {
              type: 'string',
              enum: ['nouveau', 'en_cours', 'resolu', 'fermer'],
              example: 'en_cours',
            },
          },
        },
      },
      Produit: {
        type: 'object',
        properties: {
          id: { type: 'integer', example: 2 },
          code_barre: { type: 'string', example: '1234567890123' },
          nom: { type: 'string', example: 'Produit Exemple' },
          description: {
            type: 'string',
            example: 'Ceci est un produit exemple pour illustrer une insertion',
            nullable: true,
          },
          categorie_id: { type: 'integer', example: 1 },
          prix_achat: { type: 'number', format: 'float', example: 10.5 },
          prix_vente: { type: 'number', format: 'float', example: 15.0 },
          quantite_stock: { type: 'integer', example: 98 },
          seuil_alerte: { type: 'integer', example: 10 },
          image_url: {
            type: 'string',
            example: 'http://localhost:3000/images/produit_exemple.jpg',
            nullable: true,
          },
          date_creation: {
            type: 'string',
            format: 'date-time',
            example: '2025-05-15T20:47:40Z',
          },
          date_modification: {
            type: 'string',
            format: 'date-time',
            example: '2025-05-15T21:51:41Z',
            nullable: true,
          },
        },
      },
      ProduitInput: {
        type: 'object',
        required: ['code_barre', 'nom', 'prix_achat', 'prix_vente', 'quantite_stock'],
        properties: {
          code_barre: { type: 'string', example: '1234567890123' },
          nom: { type: 'string', example: 'Produit Exemple' },
          description: {
            type: 'string',
            example: 'Description du produit',
            nullable: true,
          },
          categorie_id: { type: 'integer', example: 1 },
          prix_achat: {
            type: 'number',
            format: 'float',
            minimum: 0,
            example: 10.5,
          },
          prix_vente: {
            type: 'number',
            format: 'float',
            minimum: 0,
            example: 15.0,
          },
          quantite_stock: {
            type: 'integer',
            minimum: 0,
            example: 100,
          },
          seuil_alerte: {
            type: 'integer',
            minimum: 0,
            example: 10,
            nullable: true,
          },
          image: {
            type: 'string',
            format: 'binary',
            description: 'Image du produit (JPG/PNG)',
            nullable: true,
          },
        },
      },

      // ==================== SCH√âMAS CAT√âGORIES ====================
      Categorie: {
        type: 'object',
        properties: {
          id: { type: 'integer', example: 1 },
          nom: { type: 'string', example: 'Boissons' },
          description: {
            type: 'string',
            example: 'Toutes les boissons',
            nullable: true,
          },
        },
      },
      CategorieInput: {
        type: 'object',
        required: ['nom'],
        properties: {
          nom: { type: 'string', example: 'Boissons' },
          description: {
            type: 'string',
            example: 'Toutes les boissons',
            nullable: true,
          },
        },
      },

      // ==================== SCH√âMAS MOUVEMENTS STOCK ====================
      MouvementStock: {
        type: 'object',
        properties: {
          id: { type: 'integer', example: 1 },
          produit_id: { type: 'integer', example: 2 },
          type_mouvement: {
            type: 'string',
            enum: ['entree', 'sortie', 'ajustement'],
            example: 'entree',
          },
          quantite: { type: 'integer', example: 10 },
          date_mouvement: {
            type: 'string',
            format: 'date-time',
            example: '2025-05-15T20:47:40Z',
          },
          raison: {
            type: 'string',
            example: 'R√©approvisionnement',
            nullable: true,
          },
          utilisateur_id: { type: 'integer', example: 27 },
        },
      },
      MouvementStockInput: {
        type: 'object',
        required: ['produit_id', 'type_mouvement', 'quantite'],
        properties: {
          produit_id: { type: 'integer', example: 2 },
          type_mouvement: {
            type: 'string',
            enum: ['entree', 'sortie', 'ajustement'],
            example: 'entree',
          },
          quantite: {
            type: 'integer',
            minimum: 1,
            example: 10,
          },
          raison: {
            type: 'string',
            example: 'R√©approvisionnement',
            nullable: true,
          },
        },
      },

      // ==================== SCH√âMAS VENTES ====================
      Vente: {
        type: 'object',
        properties: {
          id: { type: 'integer', example: 1 },
          date_vente: {
            type: 'string',
            format: 'date-time',
            example: '2025-05-15T21:51:41Z',
          },
          montant_total: { type: 'number', format: 'float', example: 20.0 },
          montant_paye: { type: 'number', format: 'float', example: 50.0 },
          monnaie_rendue: { type: 'number', format: 'float', example: 30.0 },
          mode_paiement: {
            type: 'string',
            enum: ['ESPECES', 'CARTE', 'VIREMENT', 'CHEQUE'],
            example: 'ESPECES',
          },
          id_caissier: {
            type: 'integer',
            example: 27,
            nullable: true,
          },
        },
      },
      VenteInput: {
        type: 'object',
        required: ['montant_total', 'montant_paye', 'mode_paiement', 'lignes'],
        properties: {
          montant_total: {
            type: 'number',
            format: 'float',
            minimum: 0,
            example: 20.0,
          },
          montant_paye: {
            type: 'number',
            format: 'float',
            minimum: 0,
            example: 50.0,
          },
          mode_paiement: {
            type: 'string',
            enum: ['ESPECES', 'CARTE', 'VIREMENT', 'CHEQUE'],
            example: 'ESPECES',
          },
          lignes: {
            type: 'array',
            items: {
              type: 'object',
              required: ['produit_id', 'quantite'],
              properties: {
                produit_id: { type: 'integer', example: 2 },
                quantite: {
                  type: 'integer',
                  minimum: 1,
                  example: 2,
                },
              },
            },
          },
        },
      },
      LigneVente: {
        type: 'object',
        properties: {
          id: { type: 'integer', example: 1 },
          vente_id: { type: 'integer', example: 2 },
          produit_id: { type: 'integer', example: 4 },
          quantite: { type: 'integer', example: 3 },
          prix_unitaire: { type: 'number', format: 'float', example: 2.0 },
          produit_nom: { type: 'string', example: 'Gaufrettes' },
          code_barre: { type: 'string', example: '5449000000995' },
        },
      },

      // ==================== SCH√âMAS STATISTIQUES ====================
      StatsStock: {
        type: 'object',
        properties: {
          total_produits: { type: 'integer', example: 25 },
          total_categories: { type: 'integer', example: 5 },
          produits_en_rupture: { type: 'integer', example: 3 },
          produits_bientot_rupture: { type: 'integer', example: 5 },
          valeur_stock: { type: 'number', format: 'float', example: 1250.75 },
        },
      },
      StatsVentes: {
        type: 'object',
        properties: {
          total_ventes: { type: 'integer', example: 42 },
          chiffre_affaires: { type: 'number', format: 'float', example: 1250.75 },
          moyenne_par_vente: { type: 'number', format: 'float', example: 29.78 },
          produits_plus_vendus: {
            type: 'array',
            items: {
              type: 'object',
              properties: {
                produit_id: { type: 'integer', example: 4 },
                nom: { type: 'string', example: 'Gaufrettes' },
                quantite_vendue: { type: 'integer', example: 25 },
              },
            },
          },
        },
      },
    },
    paths: {
      '/login': {
        post: {
          tags: ['Authentification'],
          summary: 'Connexion utilisateur',
          description: 'Endpoint pour obtenir un token JWT',
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  required: ['email', 'password'],
                  properties: {
                    email: { type: 'string', example: 'user@example.com' },
                    password: { type: 'string', example: 'motdepasse' },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Authentification r√©ussie',
              headers: {
                'Set-Cookie': {
                  schema: { type: 'string' },
                  description: 'Cookie JWT HTTP-only',
                },
              },
            },
            401: { description: 'Identifiants invalides' },
          },
        },
      },
      '/register': {
        post: {
          tags: ['Authentification'],
          summary: 'Inscription utilisateur',
          description:
            'Endpoint pour cr√©er un nouveau compte utilisateur (r√©serv√© aux administrateurs)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/RegisterInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Utilisateur cr√©√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/User',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    errors: [
                      {
                        msg: 'Email invalide',
                        param: 'email',
                        location: 'body',
                      },
                    ],
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            409: {
              description: 'Email d√©j√† utilis√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cet email est d√©j√† utilis√©',
                  },
                },
              },
            },
          },
        },
      },

      '/request-password-reset': {
        post: {
          tags: ['Authentification'],
          summary: 'Demande de r√©initialisation de mot de passe',
          description: 'Envoie un email avec un lien de r√©initialisation',
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/PasswordResetInput',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Email envoy√© avec succ√®s',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Email de r√©initialisation envoy√©',
                  },
                },
              },
            },
            404: {
              description: 'Email non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Aucun utilisateur avec cet email',
                  },
                },
              },
            },
          },
        },
      },

      '/reset-password': {
        put: {
          tags: ['Authentification'],
          summary: 'R√©initialisation du mot de passe',
          description: 'Endpoint pour d√©finir un nouveau mot de passe apr√®s demande',
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/NewPasswordInput',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Mot de passe mis √† jour',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Mot de passe mis √† jour avec succ√®s',
                  },
                },
              },
            },
            400: {
              description: 'Token invalide ou expir√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Lien de r√©initialisation invalide ou expir√©',
                  },
                },
              },
            },
          },
        },
      },

      '/profile': {
        get: {
          tags: ['Utilisateurs'],
          summary: 'Profil utilisateur',
          description: "R√©cup√®re les informations de l'utilisateur connect√©",
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Profil utilisateur',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/User',
                  },
                },
              },
            },
            401: {
              description: 'Non authentifi√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Session expir√©e. Veuillez vous reconnecter.',
                  },
                },
              },
            },
          },
        },
      },

      '/logout': {
        post: {
          tags: ['Authentification'],
          summary: 'D√©connexion',
          description: 'Invalide le cookie de session',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'D√©connexion r√©ussie',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'D√©connexion r√©ussie',
                  },
                },
              },
            },
          },
        },
      },

      '/users': {
        get: {
          tags: ['Utilisateurs'],
          summary: 'Liste des utilisateurs',
          description: 'R√©cup√®re tous les utilisateurs (r√©serv√© aux administrateurs)',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des utilisateurs',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/User',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: { description: 'Permissions insuffisantes' },
          },
        },
      },
      '/pompe/pompes': {
        post: {
          tags: ['Pompes'],
          summary: 'Ajouter une nouvelle pompe',
          description: 'Endpoint pour ajouter une nouvelle pompe (r√©serv√© aux administrateurs)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/PompeInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Pompe cr√©√©e avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Pompe',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le num√©ro de pompe doit commencer par P suivi de 3 chiffres',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            409: {
              description: 'Num√©ro de pompe d√©j√† utilis√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Ce num√©ro de pompe est d√©j√† utilis√©',
                  },
                },
              },
            },
          },
        },
        get: {
          tags: ['Pompes'],
          summary: 'Lister toutes les pompes',
          description: 'Endpoint pour r√©cup√©rer toutes les pompes',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des pompes',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Pompe',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/pompe/pompes/{id}': {
        get: {
          tags: ['Pompes'],
          summary: 'R√©cup√©rer une pompe par ID',
          description: "Endpoint pour obtenir les d√©tails d'une pompe sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la pompe',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails de la pompe',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Pompe',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pompe non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pompe introuvable',
                  },
                },
              },
            },
          },
        },
        put: {
          tags: ['Pompes'],
          summary: 'Mettre √† jour une pompe',
          description:
            "Endpoint pour modifier les informations d'une pompe (r√©serv√© aux administrateurs)",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la pompe',
            },
          ],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/PompeUpdate',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Pompe mise √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Pompe',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Donn√©es de mise √† jour invalides',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pompe non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pompe introuvable',
                  },
                },
              },
            },
          },
        },
        delete: {
          tags: ['Pompes'],
          summary: 'Supprimer une pompe',
          description: 'Endpoint pour supprimer une pompe (r√©serv√© aux administrateurs)',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la pompe',
            },
          ],
          responses: {
            200: {
              description: 'Pompe supprim√©e',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Pompe supprim√©e avec succ√®s',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: {
              description: 'Pompe utilis√©e dans des affectations',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Impossible de supprimer - pompe utilis√©e dans des affectations',
                  },
                },
              },
            },
            404: {
              description: 'Pompe non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pompe introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/pompe/pompes/filtr√©es': {
        get: {
          tags: ['Pompes'],
          summary: 'Filtrer les pompes',
          description: 'Endpoint pour r√©cup√©rer les pompes avec filtres',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'query',
              name: 'type_pompe',
              schema: {
                type: 'string',
                enum: ['gasoil', 'multi-produits', 'sans plomb'],
              },
              description: 'Filtrer par type de pompe',
            },
            {
              in: 'query',
              name: 'statut',
              schema: {
                type: 'string',
                enum: ['active', 'reserve', 'maintenance', 'hors_service'],
              },
              description: 'Filtrer par statut',
            },
            {
              in: 'query',
              name: 'date_debut',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Filtrer par date de cr√©ation (d√©but)',
            },
            {
              in: 'query',
              name: 'date_fin',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Filtrer par date de cr√©ation (fin)',
            },
          ],
          responses: {
            200: {
              description: 'Liste des pompes filtr√©es',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Pompe',
                    },
                  },
                },
              },
            },
            400: {
              description: 'Param√®tres de filtre invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La date de fin doit √™tre apr√®s la date de d√©but',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },
      '/pistolet/add': {
        post: {
          tags: ['Pistolets'],
          summary: 'Ajouter un nouveau pistolet',
          description: 'Endpoint pour ajouter un nouveau pistolet (r√©serv√© aux administrateurs)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/PistoletInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Pistolet cr√©√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Pistolet',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le prix unitaire doit √™tre un nombre positif',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pompe non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "La pompe sp√©cifi√©e n'existe pas",
                  },
                },
              },
            },
            409: {
              description: 'Num√©ro de pistolet d√©j√† utilis√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Ce num√©ro de pistolet est d√©j√† utilis√© pour cette pompe',
                  },
                },
              },
            },
          },
        },
      },

      '/pistolet': {
        get: {
          tags: ['Pistolets'],
          summary: 'Lister tous les pistolets',
          description: 'Endpoint pour r√©cup√©rer tous les pistolets',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des pistolets',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Pistolet',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/pistolet/pompe/{pompe_id}': {
        get: {
          tags: ['Pistolets'],
          summary: 'R√©cup√©rer les pistolets par pompe',
          description: "Endpoint pour obtenir les pistolets d'une pompe sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'pompe_id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la pompe',
            },
          ],
          responses: {
            200: {
              description: 'Liste des pistolets de la pompe',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Pistolet',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pompe non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pompe introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/pistolet/update-statut': {
        put: {
          tags: ['Pistolets'],
          summary: 'Mettre √† jour le statut de plusieurs pistolets',
          description:
            'Endpoint pour modifier le statut de plusieurs pistolets en une seule requ√™te',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  required: ['pistolet_ids', 'statut'],
                  properties: {
                    pistolet_ids: {
                      type: 'array',
                      items: { type: 'integer' },
                      example: [4, 5, 6],
                      minItems: 1,
                    },
                    statut: {
                      $ref: '#/components/schemas/StatutUpdate/properties/statut',
                    },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Statuts mis √† jour',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Statuts mis √† jour avec succ√®s',
                    count: 3,
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La liste des pistolets ne peut pas √™tre vide',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/pistolet/{id}/statut': {
        put: {
          tags: ['Pistolets'],
          summary: "Mettre √† jour le statut d'un pistolet",
          description: "Endpoint pour modifier le statut d'un pistolet sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du pistolet',
            },
          ],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/StatutUpdate',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Statut mis √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Pistolet',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Statut invalide',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pistolet non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pistolet introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/affectations/add-automatic': {
        post: {
          tags: ['Affectations'],
          summary: 'G√©n√©rer les affectations automatiques',
          description:
            'Endpoint pour g√©n√©rer automatiquement les affectations √©quitables (r√©serv√© aux g√©rants)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  properties: {
                    date_debut: {
                      type: 'string',
                      format: 'date',
                      example: '2025-05-01',
                    },
                    date_fin: {
                      type: 'string',
                      format: 'date',
                      example: '2025-05-31',
                    },
                  },
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Affectations g√©n√©r√©es avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Affectation',
                    },
                  },
                },
              },
            },
            400: {
              description: 'Plage de dates invalide',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La date de fin doit √™tre apr√®s la date de d√©but',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/affectations/month/{mois}/year/{annee}': {
        get: {
          tags: ['Affectations'],
          summary: 'R√©cup√©rer les affectations par mois/ann√©e',
          description: "Endpoint pour obtenir toutes les affectations d'un mois donn√©",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'mois',
              required: true,
              schema: {
                type: 'integer',
                minimum: 1,
                maximum: 12,
              },
              description: 'Mois (1-12)',
            },
            {
              in: 'path',
              name: 'annee',
              required: true,
              schema: { type: 'integer' },
              description: 'Ann√©e (ex: 2025)',
            },
          ],
          responses: {
            200: {
              description: 'Liste des affectations',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Affectation',
                    },
                  },
                },
              },
            },
            400: {
              description: 'Param√®tres invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le mois doit √™tre entre 1 et 12',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/affectations/update/{id}': {
        put: {
          tags: ['Affectations'],
          summary: 'Mettre √† jour une affectation',
          description: 'Endpoint pour modifier une affectation existante (r√©serv√© aux g√©rants)',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: "ID de l'affectation",
            },
          ],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/AffectationUpdate',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Affectation mise √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Affectation',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Donn√©es de mise √† jour invalides',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Affectation non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Affectation introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/affectations/regenerate': {
        post: {
          tags: ['Affectations'],
          summary: 'R√©g√©n√©rer les affectations',
          description:
            'Endpoint pour r√©g√©n√©rer les affectations pour une p√©riode (r√©serv√© aux g√©rants)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  properties: {
                    date_debut: {
                      type: 'string',
                      format: 'date',
                      example: '2025-05-01',
                    },
                    date_fin: {
                      type: 'string',
                      format: 'date',
                      example: '2025-05-31',
                    },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Affectations r√©g√©n√©r√©es',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Affectation',
                    },
                  },
                },
              },
            },
            400: {
              description: 'Plage de dates invalide',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La date de fin doit √™tre apr√®s la date de d√©but',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/affectations/date/{date}': {
        get: {
          tags: ['Affectations'],
          summary: 'R√©cup√©rer les affectations par date',
          description: "Endpoint pour obtenir les affectations d'une date sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'date',
              required: true,
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date au format YYYY-MM-DD',
            },
          ],
          responses: {
            200: {
              description: 'Liste des affectations',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Affectation',
                    },
                  },
                },
              },
            },
            400: {
              description: 'Date invalide',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Format de date invalide (utiliser YYYY-MM-DD)',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/affectations/current/{pompiste_id}': {
        get: {
          tags: ['Affectations'],
          summary: "Affectation actuelle d'un pompiste",
          description: "Endpoint pour obtenir l'affectation en cours d'un pompiste",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'pompiste_id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du pompiste',
            },
          ],
          responses: {
            200: {
              description: 'Affectation actuelle',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Affectation',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Aucune affectation trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "Aucune affectation trouv√©e pour ce pompiste aujourd'hui",
                  },
                },
              },
            },
          },
        },
      },

      '/affectations/pistolets/{affectation_id}': {
        get: {
          tags: ['Affectations'],
          summary: 'Pistolets disponibles pour une affectation',
          description: 'Endpoint pour obtenir les pistolets disponibles pour une affectation',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'affectation_id',
              required: true,
              schema: { type: 'integer' },
              description: "ID de l'affectation",
            },
          ],
          responses: {
            200: {
              description: 'Liste des pistolets disponibles',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      type: 'object',
                      properties: {
                        id: { type: 'integer', example: 1 },
                        numero: { type: 'string', example: 'Pistolet 1' },
                        pompe_id: { type: 'integer', example: 35 },
                      },
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Affectation non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Affectation introuvable',
                  },
                },
              },
            },
          },
        },
      },
      '/pistolet/releves': {
        post: {
          tags: ['Revenus des Pistolets'],
          summary: 'Enregistrer un relev√© automatique',
          description: 'Endpoint pour enregistrer un relev√© de fin de poste (syst√®me automatique)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/ReleveInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Relev√© enregistr√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/RelevePoste',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "L'index de fermeture doit √™tre sup√©rieur au dernier index enregistr√©",
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pistolet non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pistolet introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/pistolet/releves/manuel': {
        post: {
          tags: ['Revenus des Pistolets'],
          summary: 'Ajouter un relev√© manuel',
          description: 'Endpoint pour ajouter un relev√© manuel (corrections ou oublis)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/ReleveManuelInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Relev√© manuel enregistr√©',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/RelevePoste',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "L'index de fermeture doit √™tre sup√©rieur √† l'index d'ouverture",
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: {
              description: 'Action non autoris√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "Vous n'avez pas les droits pour ajouter un relev√© manuel",
                  },
                },
              },
            },
          },
        },
      },

      '/pistolet/{pistolet_id}/historique': {
        get: {
          tags: ['Revenus des Pistolets'],
          summary: 'Historique des relev√©s par pistolet',
          description: "Endpoint pour obtenir l'historique des relev√©s d'un pistolet sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'pistolet_id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du pistolet',
            },
            {
              in: 'query',
              name: 'date_debut',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de d√©but (YYYY-MM-DD)',
            },
            {
              in: 'query',
              name: 'date_fin',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de fin (YYYY-MM-DD)',
            },
          ],
          responses: {
            200: {
              description: 'Historique des relev√©s',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/RelevePoste',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Pistolet non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Pistolet introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/pistolet/historique': {
        get: {
          tags: ['Revenus des Pistolets'],
          summary: 'Historique complet des relev√©s',
          description: "Endpoint pour obtenir l'historique des relev√©s de tous les pistolets",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'query',
              name: 'date',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Filtrer par date sp√©cifique (YYYY-MM-DD)',
            },
            {
              in: 'query',
              name: 'mois',
              schema: {
                type: 'integer',
                minimum: 1,
                maximum: 12,
              },
              description: 'Filtrer par mois (1-12)',
            },
            {
              in: 'query',
              name: 'annee',
              schema: { type: 'integer' },
              description: 'Filtrer par ann√©e',
            },
          ],
          responses: {
            200: {
              description: 'Historique complet',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/RelevePoste',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      // -------------------- Rapports et revenus --------------------
      '/pistolet/rapports/generer': {
        post: {
          tags: ['Revenus des Pistolets'],
          summary: 'G√©n√©rer un rapport journalier',
          description: 'Endpoint pour g√©n√©rer le rapport des ventes journali√®res',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  required: ['date'],
                  properties: {
                    date: {
                      type: 'string',
                      format: 'date',
                      example: '2025-05-15',
                    },
                    include_details: {
                      type: 'boolean',
                      default: false,
                      example: true,
                    },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Rapport g√©n√©r√©',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/RapportJournalier',
                  },
                },
              },
            },
            400: {
              description: 'Date invalide',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La date ne peut pas √™tre dans le futur',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/pistolet/rapports/manuel': {
        post: {
          tags: ['Revenus des Pistolets'],
          summary: 'Ajouter un rapport manuel',
          description: 'Endpoint pour ajouter un rapport manuel (pour corrections)',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/RapportManuelInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Rapport manuel enregistr√©',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/RapportJournalier',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le montant doit √™tre positif',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: {
              description: 'Action non autoris√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Droits insuffisants pour ajouter un rapport manuel',
                  },
                },
              },
            },
          },
        },
      },

      '/pistolet/revenus-journaliers': {
        get: {
          tags: ['Revenus des Pistolets'],
          summary: 'Obtenir les revenus journaliers',
          description: 'Endpoint pour r√©cup√©rer les revenus par jour sur une p√©riode',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'query',
              name: 'date_debut',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de d√©but (YYYY-MM-DD)',
            },
            {
              in: 'query',
              name: 'date_fin',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de fin (YYYY-MM-DD)',
            },
            {
              in: 'query',
              name: 'group_by',
              schema: {
                type: 'string',
                enum: ['day', 'week', 'month'],
                default: 'day',
              },
              description: 'Regroupement des r√©sultats',
            },
          ],
          responses: {
            200: {
              description: 'Liste des revenus journaliers',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/RevenuJournalier',
                    },
                  },
                },
              },
            },
            400: {
              description: 'Param√®tres invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La date de fin doit √™tre apr√®s la date de d√©but',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },
      '/credit/credits/add': {
        post: {
          tags: ['Cr√©dits'],
          summary: 'Cr√©er un nouveau cr√©dit',
          description: 'Endpoint pour cr√©er un nouveau cr√©dit pour un utilisateur',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/CreditInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Cr√©dit cr√©√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Credit',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le solde du cr√©dit doit √™tre positif',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/credits/all': {
        get: {
          tags: ['Cr√©dits'],
          summary: 'Lister tous les cr√©dits',
          description: 'Endpoint pour r√©cup√©rer tous les cr√©dits',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des cr√©dits',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Credit',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/credits/{id_credit}': {
        get: {
          tags: ['Cr√©dits'],
          summary: 'Obtenir un cr√©dit par ID',
          description: "Endpoint pour r√©cup√©rer les d√©tails d'un cr√©dit sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id_credit',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du cr√©dit',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails du cr√©dit',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Credit',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cr√©dit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cr√©dit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/credits/update': {
        put: {
          tags: ['Cr√©dits'],
          summary: 'Mettre √† jour un cr√©dit',
          description: "Endpoint pour modifier les informations d'un cr√©dit",
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  properties: {
                    id_credit: { type: 'integer', example: 2 },
                    type_credit: {
                      type: 'string',
                      enum: ['organisationnelle', 'individuelle'],
                      example: 'organisationnelle',
                    },
                    solde_credit: {
                      type: 'number',
                      format: 'float',
                      minimum: 0,
                      example: 500.0,
                    },
                    duree_credit: {
                      type: 'integer',
                      minimum: 1,
                      example: 30,
                    },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Cr√©dit mis √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Credit',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "La dur√©e du cr√©dit doit √™tre d'au moins 1 jour",
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cr√©dit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cr√©dit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/credits/state': {
        put: {
          tags: ['Cr√©dits'],
          summary: "Modifier l'√©tat d'un cr√©dit",
          description: "Endpoint pour changer l'√©tat d'un cr√©dit (actif/expir√©/etc.)",
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  required: ['id_credit', 'etat'],
                  properties: {
                    id_credit: { type: 'integer', example: 2 },
                    etat: {
                      type: 'string',
                      enum: ['actif', 'expir√©', 'rembours√©', 'suspendu'],
                      example: 'rembours√©',
                    },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: '√âtat du cr√©dit mis √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Credit',
                  },
                },
              },
            },
            400: {
              description: 'Action invalide',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Impossible de r√©activer un cr√©dit expir√©',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/credits/renew': {
        post: {
          tags: ['Cr√©dits'],
          summary: 'Renouveler un cr√©dit',
          description: 'Endpoint pour ajouter du solde ou prolonger un cr√©dit existant',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/CreditRenouvellement',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Cr√©dit renouvel√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Credit',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le montant √† ajouter doit √™tre positif',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cr√©dit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cr√©dit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      // ==================== ROUTES PAIEMENTS ====================
      '/credit/paiments/create': {
        post: {
          tags: ['Paiements'],
          summary: 'Enregistrer un paiement',
          description: 'Endpoint pour enregistrer un paiement pour un cr√©dit',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/PaiementInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Paiement enregistr√©',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Paiement',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le montant pay√© doit √™tre positif',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cr√©dit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cr√©dit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/paiments/all': {
        get: {
          tags: ['Paiements'],
          summary: 'Lister tous les paiements',
          description: 'Endpoint pour r√©cup√©rer tous les paiements',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des paiements',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Paiement',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/paiments/credit/{id_credit}': {
        get: {
          tags: ['Paiements'],
          summary: 'Paiements par cr√©dit',
          description: "Endpoint pour r√©cup√©rer les paiements d'un cr√©dit sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id_credit',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du cr√©dit',
            },
          ],
          responses: {
            200: {
              description: 'Liste des paiements du cr√©dit',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Paiement',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cr√©dit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cr√©dit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/paiments/utilisateur/{id_utilisateur}': {
        get: {
          tags: ['Paiements'],
          summary: 'Paiements par utilisateur',
          description: "Endpoint pour r√©cup√©rer les paiements d'un utilisateur",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id_utilisateur',
              required: true,
              schema: { type: 'integer' },
              description: "ID de l'utilisateur",
            },
          ],
          responses: {
            200: {
              description: "Liste des paiements de l'utilisateur",
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Paiement',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Utilisateur non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Utilisateur introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/paiments/reference/{reference}': {
        get: {
          tags: ['Paiements'],
          summary: 'Paiement par r√©f√©rence',
          description: 'Endpoint pour r√©cup√©rer un paiement par sa r√©f√©rence',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'reference',
              required: true,
              schema: { type: 'string' },
              description: 'R√©f√©rence du paiement',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails du paiement',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Paiement',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Paiement non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Paiement introuvable',
                  },
                },
              },
            },
          },
        },
      },

      // ==================== ROUTES V√âHICULES ====================
      '/credit/vehicules/add': {
        post: {
          tags: ['V√©hicules'],
          summary: 'Ajouter un v√©hicule',
          description: 'Endpoint pour enregistrer un nouveau v√©hicule',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/VehiculeInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'V√©hicule cr√©√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Vehicule',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "L'immatriculation est d√©j√† utilis√©e",
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/vehicules/{id}': {
        get: {
          tags: ['V√©hicules'],
          summary: 'Obtenir un v√©hicule par ID',
          description: "Endpoint pour r√©cup√©rer les d√©tails d'un v√©hicule",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du v√©hicule',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails du v√©hicule',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Vehicule',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'V√©hicule non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'V√©hicule introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/vehicules': {
        get: {
          tags: ['V√©hicules'],
          summary: 'Lister tous les v√©hicules',
          description: 'Endpoint pour r√©cup√©rer tous les v√©hicules',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des v√©hicules',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Vehicule',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/vehicules/immatriculation/{immatriculation}': {
        get: {
          tags: ['V√©hicules'],
          summary: 'Obtenir un v√©hicule par immatriculation',
          description: "Endpoint pour r√©cup√©rer un v√©hicule par son num√©ro d'immatriculation",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'immatriculation',
              required: true,
              schema: { type: 'string' },
              description: "Num√©ro d'immatriculation",
            },
          ],
          responses: {
            200: {
              description: 'D√©tails du v√©hicule',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Vehicule',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'V√©hicule non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'V√©hicule introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/vehicules/update': {
        put: {
          tags: ['V√©hicules'],
          summary: 'Mettre √† jour un v√©hicule',
          description: "Endpoint pour modifier les informations d'un v√©hicule",
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  type: 'object',
                  properties: {
                    id: { type: 'integer', example: 8 },
                    immatriculation: { type: 'string', example: '22TU2002' },
                    marque: { type: 'string', example: 'Mercedes' },
                    type_vehicule: {
                      type: 'string',
                      enum: ['voiture', 'camion', 'moto', 'bus'],
                      example: 'camion',
                    },
                    id_credit: {
                      type: 'integer',
                      example: 2,
                      nullable: true,
                    },
                  },
                },
              },
            },
          },
          responses: {
            200: {
              description: 'V√©hicule mis √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Vehicule',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "L'immatriculation est d√©j√† utilis√©e",
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'V√©hicule non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'V√©hicule introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/vehicules/client/{username}': {
        get: {
          tags: ['V√©hicules'],
          summary: 'V√©hicules par client',
          description: "Endpoint pour r√©cup√©rer les v√©hicules d'un client",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'username',
              required: true,
              schema: { type: 'string' },
              description: "Nom d'utilisateur du client",
            },
          ],
          responses: {
            200: {
              description: 'Liste des v√©hicules du client',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Vehicule',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Client non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Client introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/vehicules/credit/{id_credit}': {
        get: {
          tags: ['V√©hicules'],
          summary: 'V√©hicules par cr√©dit',
          description: 'Endpoint pour r√©cup√©rer les v√©hicules associ√©s √† un cr√©dit',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id_credit',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du cr√©dit',
            },
          ],
          responses: {
            200: {
              description: 'Liste des v√©hicules du cr√©dit',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Vehicule',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cr√©dit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cr√©dit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      // ==================== ROUTES TRANSACTIONS ====================
      '/credit/transactions/create': {
        post: {
          tags: ['Transactions'],
          summary: 'Cr√©er une transaction',
          description: 'Endpoint pour enregistrer une nouvelle transaction avec preuve photo',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'multipart/form-data': {
                schema: {
                  $ref: '#/components/schemas/TransactionInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Transaction cr√©√©e avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Transaction',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La quantit√© doit √™tre positive',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'V√©hicule non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'V√©hicule introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/credit/transactions/all': {
        get: {
          tags: ['Transactions'],
          summary: 'Lister toutes les transactions',
          description: 'Endpoint pour r√©cup√©rer toutes les transactions',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des transactions',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Transaction',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/credit/transactions/utilisateur/{id_utilisateur}': {
        get: {
          tags: ['Transactions'],
          summary: 'Transactions par utilisateur',
          description: "Endpoint pour r√©cup√©rer les transactions d'un utilisateur",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id_utilisateur',
              required: true,
              schema: { type: 'integer' },
              description: "ID de l'utilisateur",
            },
          ],
          responses: {
            200: {
              description: "Liste des transactions de l'utilisateur",
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Transaction',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Utilisateur non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Utilisateur introuvable',
                  },
                },
              },
            },
          },
        },
      },
      '/Reclamation/add': {
        post: {
          tags: ['R√©clamations'],
          summary: 'Cr√©er une nouvelle r√©clamation',
          description: 'Endpoint pour cr√©er une nouvelle r√©clamation',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/ReclamationInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'R√©clamation cr√©√©e avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Reclamation',
                  },
                },
              },
            },
            400: { description: 'Donn√©es invalides' },
            401: { description: 'Non autoris√©' },
            500: { description: 'Erreur serveur' },
          },
        },
      },
      '/Reclamation/client/{id_client}': {
        get: {
          tags: ['R√©clamations'],
          summary: "Obtenir les r√©clamations d'un client",
          description: "Endpoint pour r√©cup√©rer toutes les r√©clamations d'un client sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id_client',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du client',
            },
          ],
          responses: {
            200: {
              description: 'Liste des r√©clamations du client',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Reclamation',
                    },
                  },
                },
              },
            },
            400: { description: 'ID client invalide' },
            401: { description: 'Non autoris√©' },
            404: { description: 'Client non trouv√©' },
            500: { description: 'Erreur serveur' },
          },
        },
      },
      '/Reclamation/{id}': {
        get: {
          tags: ['R√©clamations'],
          summary: "Obtenir les d√©tails d'une r√©clamation",
          description: "Endpoint pour r√©cup√©rer les d√©tails d'une r√©clamation sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la r√©clamation',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails de la r√©clamation',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Reclamation',
                  },
                },
              },
            },
            400: { description: 'ID r√©clamation invalide' },
            401: { description: 'Non autoris√©' },
            404: { description: 'R√©clamation non trouv√©e' },
            500: { description: 'Erreur serveur' },
          },
        },
      },
      '/Reclamation/{id}/statut': {
        put: {
          tags: ['R√©clamations'],
          summary: "Mettre √† jour le statut d'une r√©clamation",
          description: "Endpoint pour modifier le statut d'une r√©clamation",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la r√©clamation',
            },
          ],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/StatutUpdate',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Statut mis √† jour avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Reclamation',
                  },
                },
              },
            },
            400: { description: 'Donn√©es invalides' },
            401: { description: 'Non autoris√©' },
            404: { description: 'R√©clamation non trouv√©e' },
            500: { description: 'Erreur serveur' },
          },
        },
      },
      '/Reclamation': {
        get: {
          tags: ['R√©clamations'],
          summary: 'Lister toutes les r√©clamations',
          description: 'Endpoint pour r√©cup√©rer toutes les r√©clamations',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste de toutes les r√©clamations',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Reclamation',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            500: { description: 'Erreur serveur' },
          },
        },
      },
      // ==================== ROUTES PRODUITS ====================
      '/stock/produits': {
        post: {
          tags: ['Produits'],
          summary: 'Cr√©er un nouveau produit',
          description: 'Endpoint pour ajouter un nouveau produit au stock',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'multipart/form-data': {
                schema: {
                  $ref: '#/components/schemas/ProduitInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Produit cr√©√© avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Produit',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le code barre est d√©j√† utilis√©',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
        get: {
          tags: ['Produits'],
          summary: 'Lister tous les produits',
          description: 'Endpoint pour r√©cup√©rer tous les produits',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des produits',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Produit',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/stock/produits/{id}': {
        put: {
          tags: ['Produits'],
          summary: 'Mettre √† jour un produit',
          description: "Endpoint pour modifier les informations d'un produit",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du produit',
            },
          ],
          requestBody: {
            required: true,
            content: {
              'multipart/form-data': {
                schema: {
                  $ref: '#/components/schemas/ProduitInput',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Produit mis √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Produit',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "Le prix de vente doit √™tre sup√©rieur au prix d'achat",
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Produit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Produit introuvable',
                  },
                },
              },
            },
          },
        },
        delete: {
          tags: ['Produits'],
          summary: 'Supprimer un produit',
          description: 'Endpoint pour supprimer un produit du stock',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du produit',
            },
          ],
          responses: {
            200: {
              description: 'Produit supprim√©',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Produit supprim√© avec succ√®s',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: {
              description: 'Action non autoris√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Impossible de supprimer un produit avec des ventes associ√©es',
                  },
                },
              },
            },
            404: {
              description: 'Produit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Produit introuvable',
                  },
                },
              },
            },
          },
        },
        get: {
          tags: ['Produits'],
          summary: 'Obtenir un produit par ID',
          description: "Endpoint pour r√©cup√©rer les d√©tails d'un produit sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du produit',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails du produit',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Produit',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Produit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Produit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/stock/produits/low-stock': {
        get: {
          tags: ['Produits'],
          summary: 'Produits en faible stock',
          description:
            "Endpoint pour r√©cup√©rer les produits dont le stock est inf√©rieur au seuil d'alerte",
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des produits en faible stock',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Produit',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      // ==================== ROUTES CAT√âGORIES ====================
      '/stock/categories': {
        post: {
          tags: ['Cat√©gories'],
          summary: 'Cr√©er une nouvelle cat√©gorie',
          description: 'Endpoint pour ajouter une nouvelle cat√©gorie de produits',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/CategorieInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Cat√©gorie cr√©√©e avec succ√®s',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Categorie',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le nom de cat√©gorie est d√©j√† utilis√©',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
        get: {
          tags: ['Cat√©gories'],
          summary: 'Lister toutes les cat√©gories',
          description: 'Endpoint pour r√©cup√©rer toutes les cat√©gories',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Liste des cat√©gories',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Categorie',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/stock/categories/{id}': {
        put: {
          tags: ['Cat√©gories'],
          summary: 'Mettre √† jour une cat√©gorie',
          description: "Endpoint pour modifier les informations d'une cat√©gorie",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la cat√©gorie',
            },
          ],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/CategorieInput',
                },
              },
            },
          },
          responses: {
            200: {
              description: 'Cat√©gorie mise √† jour',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Categorie',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le nom de cat√©gorie est d√©j√† utilis√©',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cat√©gorie non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cat√©gorie introuvable',
                  },
                },
              },
            },
          },
        },
        delete: {
          tags: ['Cat√©gories'],
          summary: 'Supprimer une cat√©gorie',
          description: 'Endpoint pour supprimer une cat√©gorie',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la cat√©gorie',
            },
          ],
          responses: {
            200: {
              description: 'Cat√©gorie supprim√©e',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Cat√©gorie supprim√©e avec succ√®s',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: {
              description: 'Action non autoris√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Impossible de supprimer une cat√©gorie avec des produits associ√©s',
                  },
                },
              },
            },
            404: {
              description: 'Cat√©gorie non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cat√©gorie introuvable',
                  },
                },
              },
            },
          },
        },
        get: {
          tags: ['Cat√©gories'],
          summary: 'Obtenir une cat√©gorie par ID',
          description: "Endpoint pour r√©cup√©rer les d√©tails d'une cat√©gorie sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la cat√©gorie',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails de la cat√©gorie',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Categorie',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Cat√©gorie non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Cat√©gorie introuvable',
                  },
                },
              },
            },
          },
        },
      },

      // ==================== ROUTES MOUVEMENTS STOCK ====================
      '/stock/mouvements': {
        post: {
          tags: ['Mouvements Stock'],
          summary: 'Enregistrer un mouvement de stock',
          description: 'Endpoint pour enregistrer une entr√©e, sortie ou ajustement de stock',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/MouvementStockInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Mouvement enregistr√©',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/MouvementStock',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'La quantit√© doit √™tre positive',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Produit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Produit introuvable',
                  },
                },
              },
            },
          },
        },
        get: {
          tags: ['Mouvements Stock'],
          summary: 'Historique des mouvements',
          description: 'Endpoint pour r√©cup√©rer les mouvements de stock par date',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'query',
              name: 'date_debut',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de d√©but (YYYY-MM-DD)',
            },
            {
              in: 'query',
              name: 'date_fin',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de fin (YYYY-MM-DD)',
            },
          ],
          responses: {
            200: {
              description: 'Liste des mouvements',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/MouvementStock',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/stock/mouvements/produit/{produitId}': {
        get: {
          tags: ['Mouvements Stock'],
          summary: 'Mouvements par produit',
          description: "Endpoint pour r√©cup√©rer l'historique des mouvements d'un produit",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'produitId',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du produit',
            },
          ],
          responses: {
            200: {
              description: 'Historique des mouvements du produit',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/MouvementStock',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Produit non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Produit introuvable',
                  },
                },
              },
            },
          },
        },
      },

      // ==================== ROUTES VENTES ====================
      '/stock/ventes': {
        post: {
          tags: ['Ventes'],
          summary: 'Enregistrer une vente',
          description: 'Endpoint pour enregistrer une nouvelle vente',
          security: [{ cookieAuth: [] }],
          requestBody: {
            required: true,
            content: {
              'application/json': {
                schema: {
                  $ref: '#/components/schemas/VenteInput',
                },
              },
            },
          },
          responses: {
            201: {
              description: 'Vente enregistr√©e',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Vente',
                  },
                },
              },
            },
            400: {
              description: 'Donn√©es invalides',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Le montant pay√© doit couvrir le montant total',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
        get: {
          tags: ['Ventes'],
          summary: 'Historique des ventes',
          description: 'Endpoint pour r√©cup√©rer les ventes par date',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'query',
              name: 'date_debut',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de d√©but (YYYY-MM-DD)',
            },
            {
              in: 'query',
              name: 'date_fin',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Date de fin (YYYY-MM-DD)',
            },
          ],
          responses: {
            200: {
              description: 'Liste des ventes',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Vente',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/stock/ventes/{id}': {
        get: {
          tags: ['Ventes'],
          summary: 'Obtenir une vente par ID',
          description: "Endpoint pour r√©cup√©rer les d√©tails d'une vente sp√©cifique",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la vente',
            },
          ],
          responses: {
            200: {
              description: 'D√©tails de la vente',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/Vente',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Vente non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Vente introuvable',
                  },
                },
              },
            },
          },
        },
        delete: {
          tags: ['Ventes'],
          summary: 'Annuler une vente',
          description: 'Endpoint pour annuler une vente existante',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la vente',
            },
          ],
          responses: {
            200: {
              description: 'Vente annul√©e',
              content: {
                'application/json': {
                  example: {
                    success: true,
                    message: 'Vente annul√©e avec succ√®s',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            403: {
              description: 'Action non autoris√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: "Impossible d'annuler une vente de plus de 24h",
                  },
                },
              },
            },
            404: {
              description: 'Vente non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Vente introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/stock/ventes/caissier/{caissierId}': {
        get: {
          tags: ['Ventes'],
          summary: 'Ventes par caissier',
          description: 'Endpoint pour r√©cup√©rer les ventes effectu√©es par un caissier',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'caissierId',
              required: true,
              schema: { type: 'integer' },
              description: 'ID du caissier',
            },
            {
              in: 'query',
              name: 'date',
              schema: {
                type: 'string',
                format: 'date',
              },
              description: 'Filtrer par date sp√©cifique (YYYY-MM-DD)',
            },
          ],
          responses: {
            200: {
              description: 'Liste des ventes du caissier',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/Vente',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Caissier non trouv√©',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Caissier introuvable',
                  },
                },
              },
            },
          },
        },
      },

      '/stock/ventes/{id}/lignes': {
        get: {
          tags: ['Ventes'],
          summary: 'Lignes de vente',
          description: "Endpoint pour r√©cup√©rer les lignes d√©taill√©es d'une vente",
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'path',
              name: 'id',
              required: true,
              schema: { type: 'integer' },
              description: 'ID de la vente',
            },
          ],
          responses: {
            200: {
              description: 'Liste des lignes de vente',
              content: {
                'application/json': {
                  schema: {
                    type: 'array',
                    items: {
                      $ref: '#/components/schemas/LigneVente',
                    },
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
            404: {
              description: 'Vente non trouv√©e',
              content: {
                'application/json': {
                  example: {
                    success: false,
                    message: 'Vente introuvable',
                  },
                },
              },
            },
          },
        },
      },

      // ==================== ROUTES STATISTIQUES ====================
      '/stock/stats/stock': {
        get: {
          tags: ['Statistiques'],
          summary: 'Statistiques de stock',
          description: 'Endpoint pour r√©cup√©rer les statistiques globales du stock',
          security: [{ cookieAuth: [] }],
          responses: {
            200: {
              description: 'Statistiques du stock',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/StatsStock',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },

      '/stock/stats/ventes': {
        get: {
          tags: ['Statistiques'],
          summary: 'Statistiques de ventes',
          description: 'Endpoint pour r√©cup√©rer les statistiques des ventes',
          security: [{ cookieAuth: [] }],
          parameters: [
            {
              in: 'query',
              name: 'periode',
              schema: {
                type: 'string',
                enum: ['jour', 'semaine', 'mois', 'annee'],
                default: 'mois',
              },
              description: "P√©riode d'analyse",
            },
          ],
          responses: {
            200: {
              description: 'Statistiques des ventes',
              content: {
                'application/json': {
                  schema: {
                    $ref: '#/components/schemas/StatsVentes',
                  },
                },
              },
            },
            401: { description: 'Non autoris√©' },
          },
        },
      },
    },
  },
  apis: [], // On utilise la documentation manuelle dans ce fichier
};

const swaggerSpec = swaggerJsdoc(options);

export default swaggerSpec;
